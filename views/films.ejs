<!-- Written By: Kara Balsom
Date Written: Nov 25, 2022 -->

<html lang="en">
 <!-- Sets up the bootstrap: -->
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
    crossorigin="anonymous"
/>
  <!-- Adds the header and nav from head.ejs and nav.ejs: -->
    <%- include('./partials/head.ejs') %>
    <body class="container text-center">
        <%- include('./partials/nav.ejs') %>
        <div class="actors content">
        <!-- Set up a form to post films. Two input boxes take in title and year as a request, and they are sent to the films.js file in the routes folder, which calls the addFilm() function in m.films.dal.js. The function sends back the results to films.js, which sends them back to here to be displayed in the list of films.  -->
            <form action="/films" method="POST">
            </br><h2><u>EDIT FILMS</u></h2>
            </br><label>ADD FILM:</label></br>
                <input placeholder="Title" type="text" id="title" name="title" value="<%= locals.title %>" required></br>
                <input placeholder="Year" type="text" id="year" name="year" value="<%= locals.year %>" required>
            </br></br>
            <button class="btn btn-primary">ADD</button></b></form>
            <!-- Displays a list of films, which is generated by the getFilms() function in m.films.dal.js, and routed through films.js in the routes folder. reverse() function adds the posted film to the top of the list. -->
            <% if (theFilms.length > 0) { %>
                <% theFilms.reverse().forEach(film => { %>
                    <b><%= film.title %> <%= film.year %></b>
                    <a href="/films/<%=film._id%>/edit?title=<%=film.title%>&year=<%=film.year%>">EDIT</a>
                    <a href="/films/<%=film._id%>/replace?title=<%=film.title%>&year=<%=film.year%>">REPLACE</a> 
                    <a href="/films/<%=film._id%>/delete?title=<%=film.title%>&year=<%=film.year%>">DELETE</a></br>
                    <% }) %>
            <% } %>
        </form></br>
        </div>
    </body>
    <!-- Adds the footer from foot.ejs: -->
    <%- include('./partials/foot.ejs') %>
</html>